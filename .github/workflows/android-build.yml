name: Android Build

on:
workflow_dispatch: # Permet de lancer manuellement
push:
branches: [ main ]
pull_request:
branches: [ main ]

jobs:
build:
name: Build APK
runs-on: ubuntu-latest

steps:
- name: Checkout code
uses: actions/checkout@v4

- name: Set up JDK 17
uses: actions/setup-java@v4
with:
distribution: 'temurin'
java-version: 17

- name: Grant permission to Gradle
run: chmod +x ./gradlew

- name: Build APK (Debug)
run: ./gradlew assembleDebug

- name: Upload APK artifact
uses: actions/upload-artifact@v4
with:
name: fin-de-journee-debug-apk
path: app/build/outputs/apk/debug/app-debug.apk
